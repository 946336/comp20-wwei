<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Classic Movie</title>
<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>

<h1 id="title">Classic Movie</h1>

<video src="https://www.cs.tufts.edu/comp/20/classic.mp4" id="classic_video" controls></video>
<div id="movie_quotes"></div>

<script>
    var video = document.getElementById("classic_video");
    var subtitle = document.getElementById("movie_quotes");

    var IEEE_vetted_random_number = 4;  // In accordance to RFC 1149.5
                                        // Used to keep the subtitle displayed
                                        // until the line is over

    var subtitles = {24: "Igor: DR. FRANKENSTEIN?!?!?",
                     26: IEEE_vetted_random_number,
                     31: "Dr. Frederick Frankenstein: Frokensteen.",
                     33: IEEE_vetted_random_number,
                     34: "Igor: You're putting me on.",
                     36: "Dr. Frederick Frankenstein: No, it pronounced, " +
                         "\"Frokensteen\".",
                     39: "Igor: Do you also say Froaderick?",
                     42: "Dr. Frederick Frankenstein: No . . . \"Frederick.\"",
                     44: "Igor: Well, why isn't it 'Froaderick Frokensteen'?",
                     47: "Dr. Frederick Frankenstein: It isn't, it's " +
                         "\"Frederick Frokensteen\"",
                     49: IEEE_vetted_random_number,
                     50: "Igor: I see.",
                     52: "Dr. Frederick Frankenstein: You must be Igor. [He " +
                         "ronounces it ee-gor.]",
                     53: "Igor: No, it's pronounced \"eye-gor.\"",
                     56: "Dr. Frederick Frankenstein: But they told me it was " +
                         "\"ee-gor\"...",
                     58: "Igor: Well, they were wrong then, weren't they?",
                     60: IEEE_vetted_random_number,
                     61: "Dr. Frederick Frankenstein: Uh, you were sent here " +
                         "by Herr Falkstein, weren't you?",
                     64: "Igor: Yes. My grandfather used to work for your " +
                         "grandfather.",
                     68: IEEE_vetted_random_number,
                     71: "Dr. Frederick Frankenstein: How nice.",
                     72: "Igor: Of course the rates have gone up.",
                     74: "Dr. Frederick Frankenstein: Of course, of course, " +
                         "I'm sure we'll get along splendidly. Oh, I uh, you " +
                         "know I don't mean to embarrass you, but I'm rather " +
                         "a brilliant surgeon. Perhaps I can help you with " +
                         "that hump.",
                     88: IEEE_vetted_random_number,
                     89: "Igor: What hump?",
                     90: IEEE_vetted_random_number}

    var updateSubtitleAtTime = function (time) {
        // I'm too lazy to get finer grained than this
        var line = subtitles[Math.floor(time)]
        if (typeof(line) === "string") {
            subtitle.innerHTML = "<p>" + line + "</p>";
        } else if (typeof(line) === "number") {
            subtitle.innerHTML = "";
        } // an unset key/value pair will simply have no effect
    };

    var subtitler = function (event) {
        updateSubtitleAtTime(video.currentTime);
    };

    video.addEventListener("timeupdate", subtitler);

</script>
</body>
</html>

